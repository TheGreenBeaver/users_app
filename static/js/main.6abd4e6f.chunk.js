(this.webpackJsonpusers_app=this.webpackJsonpusers_app||[]).push([[0],{15:function(e,t,a){},23:function(e,t,a){e.exports=a(35)},28:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(21),o=a.n(s),c=a(6),i=a(7),l=a(9),u=a(8),p=a(16),m=(a(28),a(10)),h=a.n(m),d=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",error:""},e.logIn=function(){h()(".log-in-out-btn").text("").prop("disabled",!0).addClass("auth-loading");var t=e.state,a=t.username,n=t.password;h.a.ajax("http://emphasoft-test-assignment.herokuapp.com/api-token-auth/",{type:"POST",data:JSON.stringify({username:a,password:n}),headers:{"content-type":"application/json"},success:e.onAuthSuccess,error:e.onAuthError})},e.onAuthSuccess=function(t){h()(".log-in-out-btn").removeClass("auth-loading").addClass("auth-success"),setTimeout((function(){return e.props.setToken(t.token)}),1e3)},e.onAuthError=function(){e.setState({error:"auth"}),h()(".log-in-out-btn").removeClass("auth-loading").text("Log In")},e.onBlur=function(t){var a=t.target,n=a.name,r=a.value,s=""===r||RegExp(a.pattern).test(r)?"":n;e.setState({error:s})},e.onChange=function(t){var a;e.setState((a={},Object(p.a)(a,t.target.name,t.target.value),Object(p.a)(a,"error",""),a))},e.getErrorAlert=function(){switch(e.state.error){case"auth":return"Something went wrong. Please check if you've entered the username and the password correctly";case"username":return"Username mustn't be longer than 150 characters or contain characters other than letters, digits or @ . + - _";case"password":return"Password must be 8-128 characters long and contain at least one capital latin letter and digit";default:return""}},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.error,n=e.password;return r.a.createElement("div",{id:"auth-wrapper",className:""===a?"":"error-msg-wrapper"},r.a.createElement("input",{type:"text",placeholder:"username",name:"username",maxLength:150,pattern:"^[\\w.@+-]+$",onChange:this.onChange,onBlur:this.onBlur}),r.a.createElement("input",{type:"password",placeholder:"password",name:"password",maxLength:128,pattern:"^(?=.*[A-Z])(?=.*\\d).{8,}$",onChange:this.onChange,onBlur:this.onBlur}),r.a.createElement("button",{className:"log-in-out-btn",onClick:this.logIn,disabled:""===t||""===n||""!==a},"Log In"),""===a?null:r.a.createElement("p",{id:"error-alert"},this.getErrorAlert()))}}]),a}(n.Component),f=(a(15),a(13)),g=a(1),v=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=+this.props.match.params.userId,t=this.props.allUsers.filter((function(t){return t.id===e}))[0];return r.a.createElement("div",{id:"user-info-wrapper"},void 0===t?r.a.createElement("div",{id:"loading"},""):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"user-info-container"},r.a.createElement("p",null,"Username:"),r.a.createElement("p",null,t.username)),r.a.createElement("div",{className:"user-info-container"},r.a.createElement("p",null,"First Name:"),r.a.createElement("p",null,t.first_name)),r.a.createElement("div",{className:"user-info-container"},r.a.createElement("p",null,"Last name:"),r.a.createElement("p",null,t.last_name))))}}]),a}(n.Component),b=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={search:""},e.ListItems=function(){var t=e.props.allUsers,a=e.state.search,n=t.filter((function(e){return e.username.includes(a)}));return r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(f.b,{className:"user-link",to:"/users_app/".concat(e.id)},e.username))})))},e.search=function(t){e.setState({search:t.target.value})},e.scrollShadow=function(){var e=h()("#users-list-container").scrollTop();h()("#shadow-dropper").css("top",e)},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"search-bar-container"},r.a.createElement("img",{id:"search-icon",src:"https://raw.githubusercontent.com/TheGreenBeaver/ImgStorage/ad90900ff126f32a44528ac6fab06596a98861d4/usersApp/search.svg",alt:"search"}),r.a.createElement("input",{id:"search-input",type:"text",placeholder:"search user",onChange:this.search})),r.a.createElement("div",{id:"users-list-container",onScroll:this.scrollShadow},r.a.createElement("div",{id:"shadow-dropper"},""),r.a.createElement(this.ListItems,null)))}}]),a}(n.Component),E=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={listOfUsers:[]},e.onGetUsersSuccess=function(t){e.setState({listOfUsers:t.sort((function(e,t){return+e.id-+t.id}))})},e.logOut=function(){e.props.setToken("")},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){h.a.ajax({url:"http://emphasoft-test-assignment.herokuapp.com/api/v1/users/",type:"GET",headers:{"content-type":"application/json",Authorization:"Token "+this.props.token},success:this.onGetUsersSuccess})}},{key:"render",value:function(){var e=this.state.listOfUsers;return r.a.createElement("div",{id:"authorized-view-wrapper"},r.a.createElement("div",{id:"distribution-container"},r.a.createElement(f.a,null,r.a.createElement(g.a,{path:"/users_app/",exact:!0,render:function(t){return r.a.createElement(b,Object.assign({},t,{allUsers:e}))}}),r.a.createElement(g.a,{path:"/users_app/:userId",exact:!0,render:function(t){return r.a.createElement(v,Object.assign({},t,{allUsers:e}))}}))),r.a.createElement("button",{className:"log-in-out-btn",onClick:this.logOut},"Log Out"))}}]),a}(n.Component),k=(a(34),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).state={token:""},n.saveState=function(){localStorage.setItem("token",n.state.token)},n.setToken=function(e){n.setState({token:e})};var r=localStorage.getItem("token");return null!=r&&(n.state.token=r),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.saveState,!1)}},{key:"render",value:function(){var e=this.state.token;return r.a.createElement("div",{id:"main-container"},r.a.createElement("img",{id:"logo",src:"https://raw.githubusercontent.com/TheGreenBeaver/ImgStorage/4b1beb035a7db28d9ea803129695e146d5c3a20b/usersApp/logo.svg",alt:"logo"}),""===e?r.a.createElement(d,{setToken:this.setToken}):r.a.createElement(E,{setToken:this.setToken,token:e}))}}]),a}(n.Component));o.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.6abd4e6f.chunk.js.map