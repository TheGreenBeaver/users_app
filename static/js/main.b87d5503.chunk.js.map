{"version":3,"sources":["components/Authorization.js","components/ExactUser.js","components/List.js","components/UsersList.js","App.js","index.js"],"names":["Authorization","state","username","password","error","logIn","$","text","prop","addClass","ajax","type","data","JSON","stringify","headers","success","onAuthSuccess","onAuthError","removeClass","setTimeout","props","setToken","token","setState","onBlur","e","target","name","value","newErrorVal","RegExp","pattern","test","onChange","getErrorAlert","this","id","className","placeholder","maxLength","onClick","disabled","Component","ExactUser","userId","match","params","exactUser","allUsers","filter","user","undefined","Fragment","first_name","last_name","List","search","ListItems","filteredList","includes","map","key","to","scrollShadow","scrollTop","css","src","alt","onScroll","UsersList","listOfUsers","onGetUsersSuccess","sort","userA","userB","logOut","url","path","exact","render","App","saveState","localStorage","setItem","getItem","window","addEventListener","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.b87d5503.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport '../resources/styles/Authorization.css'\r\nimport $ from 'jquery'\r\n\r\n\r\nclass Authorization extends Component {\r\n\r\n    state = {\r\n        username: '',\r\n        password: '',\r\n        error: ''\r\n    };\r\n\r\n    render() {\r\n\r\n        const { username, error, password } = this.state;\r\n\r\n        return (\r\n            <div\r\n                id='auth-wrapper'\r\n                className={error === '' ? '' : 'error-msg-wrapper'}\r\n            >\r\n\r\n                <input\r\n                    type='text'\r\n                    placeholder='username'\r\n                    name='username'\r\n                    maxLength={150}\r\n                    pattern='^[\\w.@+-]+$'\r\n                    onChange={this.onChange}\r\n                    onBlur={this.onBlur}\r\n                />\r\n\r\n                <input\r\n                    type='password'\r\n                    placeholder='password'\r\n                    name='password'\r\n                    maxLength={128}\r\n                    pattern='^(?=.*[A-Z])(?=.*\\d).{8,}$'\r\n                    onChange={this.onChange}\r\n                    onBlur={this.onBlur}\r\n                />\r\n\r\n                <button\r\n                    className='log-in-out-btn'\r\n                    onClick={this.logIn}\r\n                    disabled={\r\n                        username === '' ||\r\n                        password === '' ||\r\n                        error !== ''\r\n                    }\r\n                >\r\n                    Log In\r\n                </button>\r\n\r\n                {\r\n                    error === ''\r\n                        ?\r\n                        null\r\n                        :\r\n                        <p\r\n                            id='error-alert'\r\n                        >\r\n                            {this.getErrorAlert()}\r\n                        </p>\r\n                }\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n    logIn = () => {\r\n        $('.log-in-out-btn').text('').prop('disabled', true).addClass('auth-loading');\r\n        const { username, password } = this.state;\r\n        $.ajax(\r\n            'https://emphasoft-test-assignment.herokuapp.com/api-token-auth/',\r\n            {\r\n                type: 'POST',\r\n                data: JSON.stringify({\r\n                    username: username,\r\n                    password: password\r\n                }),\r\n                headers: {\r\n                    'content-type': 'application/json'\r\n                },\r\n                success: this.onAuthSuccess,\r\n                error: this.onAuthError\r\n            }\r\n        )\r\n    };\r\n\r\n    onAuthSuccess = data => {\r\n        $('.log-in-out-btn').removeClass('auth-loading').addClass('auth-success');\r\n        setTimeout(() => this.props.setToken(data.token), 1000);\r\n    };\r\n\r\n    onAuthError = () => {\r\n        this.setState({\r\n            error: 'auth'\r\n        });\r\n        $('.log-in-out-btn').removeClass('auth-loading').text('Log In')\r\n    };\r\n\r\n    onBlur = e => {\r\n        const target = e.target;\r\n        const name = target.name;\r\n        const value = target.value;\r\n        const newErrorVal =\r\n            value === '' || RegExp(target.pattern).test(value)\r\n                ?\r\n                ''\r\n                :\r\n                name;\r\n        this.setState({\r\n            error: newErrorVal\r\n        });\r\n    };\r\n\r\n    onChange = e => {\r\n        this.setState({\r\n            [e.target.name]: e.target.value,\r\n            error: ''\r\n        })\r\n    };\r\n\r\n    getErrorAlert = () => {\r\n        switch (this.state.error) {\r\n            case 'auth':\r\n                return \"Something went wrong. Please check if you've entered the username and the password correctly\";\r\n            case 'username':\r\n                return \"Username mustn't be longer than 150 characters or contain characters other than letters, digits or @ . + - _\";\r\n            case 'password':\r\n                return \"Password must be 8-128 characters long and contain at least one capital latin letter and digit\";\r\n            default:\r\n                return '';\r\n        }\r\n    };\r\n}\r\n\r\nAuthorization.propTypes = {\r\n    setToken: PropTypes.func.isRequired\r\n};\r\n\r\nexport default Authorization;","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport '../resources/styles/UsersList.css'\r\n\r\nclass ExactUser extends Component {\r\n\r\n    render() {\r\n\r\n        const userId = +this.props.match.params.userId;\r\n        const {allUsers} = this.props;\r\n        const exactUser = allUsers.filter(user => user.id === userId)[0];\r\n\r\n        return (\r\n            <div\r\n                id='user-info-wrapper'\r\n            >\r\n\r\n                {\r\n                    exactUser === undefined\r\n                        ?\r\n                        <div\r\n                            id='loading'\r\n                        >\r\n                            {''}\r\n                        </div>\r\n                        :\r\n                        <React.Fragment>\r\n\r\n                            <div\r\n                                className='user-info-container'\r\n                            >\r\n                                <p>\r\n                                    Username:\r\n                                </p>\r\n                                <p>\r\n                                    {exactUser.username}\r\n                                </p>\r\n                            </div>\r\n\r\n                            <div\r\n                                className='user-info-container'\r\n                            >\r\n                                <p>\r\n                                    First Name:\r\n                                </p>\r\n                                <p>\r\n                                    {exactUser.first_name}\r\n                                </p>\r\n                            </div>\r\n\r\n                            <div\r\n                                className='user-info-container'\r\n                            >\r\n                                <p>\r\n                                    Last name:\r\n                                </p>\r\n                                <p>\r\n                                    {exactUser.last_name}\r\n                                </p>\r\n                            </div>\r\n\r\n                        </React.Fragment>\r\n\r\n                }\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nExactUser.propTypes = {\r\n    allUsers: PropTypes.array.isRequired\r\n};\r\n\r\nexport default ExactUser;","import React, {Component} from 'react';\r\nimport '../resources/styles/UsersList.css'\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from \"react-router-dom\";\r\nimport $ from 'jquery';\r\n\r\nclass List extends Component {\r\n\r\n    state = {\r\n        search: ''\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n\r\n                <div\r\n                    id='search-bar-container'\r\n                >\r\n\r\n                    <img\r\n                        id='search-icon'\r\n                        src='https://raw.githubusercontent.com/TheGreenBeaver/ImgStorage/ad90900ff126f32a44528ac6fab06596a98861d4/usersApp/search.svg'\r\n                        alt='search'\r\n                    />\r\n\r\n                    <input\r\n                        id='search-input'\r\n                        type='text'\r\n                        placeholder='search user'\r\n                        onChange={this.search}\r\n                    />\r\n\r\n                </div>\r\n\r\n                <div\r\n                    id='users-list-container'\r\n                    onScroll={this.scrollShadow}\r\n                >\r\n                    <div\r\n                        id='shadow-dropper'\r\n                    >\r\n                        {''}\r\n                    </div>\r\n\r\n                    <this.ListItems />\r\n\r\n                </div>\r\n\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n    ListItems = () => {\r\n\r\n        const { allUsers } =  this.props;\r\n        const { search } = this.state;\r\n\r\n        const filteredList = allUsers.filter(\r\n            user => user.username.includes(search)\r\n        );\r\n\r\n        return (\r\n            <ul>\r\n                {\r\n                    filteredList.map(\r\n                        user => (\r\n                            <li key={user.id}>\r\n                                <Link\r\n                                    className='user-link'\r\n                                    to={`/users_app/${user.id}`}\r\n                                >\r\n                                    {user.username}\r\n                                </Link>\r\n                            </li>\r\n                        )\r\n                    )\r\n                }\r\n            </ul>\r\n        )\r\n    };\r\n\r\n    search = e => {\r\n        this.setState({\r\n            search: e.target.value\r\n        })\r\n    };\r\n\r\n    scrollShadow = () => {\r\n        const scrollTop = $('#users-list-container').scrollTop();\r\n        $('#shadow-dropper').css('top', scrollTop);\r\n    }\r\n}\r\n\r\nList.propTypes = {\r\n    allUsers: PropTypes.array.isRequired\r\n};\r\n\r\nexport default List;","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery'\r\nimport '../resources/styles/UsersList.css'\r\nimport {BrowserRouter as Router, Route} from \"react-router-dom\";\r\nimport ExactUser from \"./ExactUser\";\r\nimport List from \"./List\";\r\n\r\nclass UsersList extends Component {\r\n\r\n    state = {\r\n        listOfUsers: []\r\n    };\r\n\r\n    componentDidMount() {\r\n        $.ajax(\r\n            {\r\n                url: 'https://emphasoft-test-assignment.herokuapp.com/api/v1/users/',\r\n                type: 'GET',\r\n                headers: {\r\n                    'content-type': 'application/json',\r\n                    'Authorization': 'Token ' + this.props.token\r\n                },\r\n                success: this.onGetUsersSuccess\r\n            }\r\n        )\r\n    }\r\n\r\n    onGetUsersSuccess = data => {\r\n        this.setState({\r\n            listOfUsers: data.sort((userA, userB) => +userA.id - (+userB.id))\r\n        })\r\n    };\r\n\r\n    render() {\r\n\r\n        const {listOfUsers} = this.state;\r\n\r\n        return (\r\n            <div\r\n                id='authorized-view-wrapper'\r\n            >\r\n\r\n                <div\r\n                    id='distribution-container'\r\n                >\r\n                    <Router>\r\n\r\n                        <Route\r\n                            path='/users_app/'\r\n                            exact\r\n                            render={\r\n                                props => (\r\n                                    <List\r\n                                        {...props}\r\n                                        allUsers={listOfUsers}\r\n                                    />\r\n                                )\r\n                            }\r\n                        />\r\n\r\n                        <Route\r\n                            path='/users_app/:userId'\r\n                            exact\r\n                            render={\r\n                                props => (\r\n                                    <ExactUser\r\n                                        {...props}\r\n                                        allUsers={listOfUsers}\r\n                                    />\r\n                                )\r\n                            }\r\n                        />\r\n\r\n                    </Router>\r\n                </div>\r\n\r\n                <button\r\n                    className='log-in-out-btn'\r\n                    onClick={this.logOut}\r\n                >\r\n                    Log Out\r\n                </button>\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n    logOut = () => {\r\n        this.props.setToken('');\r\n    };\r\n\r\n}\r\n\r\nUsersList.propTypes = {\r\n    token: PropTypes.string.isRequired,\r\n    setToken: PropTypes.func.isRequired\r\n};\r\n\r\nexport default UsersList;","import React, { Component } from 'react';\r\nimport Authorization from \"./components/Authorization\";\r\nimport UsersList from \"./components/UsersList\";\r\nimport '../src/resources/styles/Main.css'\r\n\r\nclass App extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const token = localStorage.getItem('token');\r\n        if (token != null) {\r\n            this.state.token = token\r\n        }\r\n    }\r\n\r\n    state = {\r\n        token: ''\r\n    };\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('beforeunload', this.saveState, false)\r\n    }\r\n\r\n    saveState = () => {\r\n        localStorage.setItem('token', this.state.token)\r\n    };\r\n\r\n    render() {\r\n\r\n        const { token } = this.state;\r\n\r\n        return (\r\n            <div\r\n                id='main-container'\r\n            >\r\n                <img\r\n                    id='logo'\r\n                    src='https://raw.githubusercontent.com/TheGreenBeaver/ImgStorage/4b1beb035a7db28d9ea803129695e146d5c3a20b/usersApp/logo.svg'\r\n                    alt='logo'\r\n                />\r\n\r\n                {\r\n                    token === ''\r\n                        ?\r\n                        <Authorization\r\n                            setToken={this.setToken}\r\n                        />\r\n                        :\r\n                        <UsersList\r\n                            setToken={this.setToken}\r\n                            token={token}\r\n                        />\r\n                }\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n    setToken = token => {\r\n        this.setState({\r\n            token: token\r\n        })\r\n    }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n    <App/>,\r\n    document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}